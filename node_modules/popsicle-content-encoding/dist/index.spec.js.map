{"version":3,"file":"index.spec.js","sourceRoot":"","sources":["../src/index.spec.ts"],"names":[],"mappings":";;AAAA,mCAA0C;AAC1C,2CAAqD;AACrD,+BAAkC;AAElC,QAAQ,CAAC,qBAAqB,EAAE,GAAG,EAAE;IACnC,MAAM,GAAG,GAAG,IAAI,cAAO,CAAC,qBAAqB,CAAC,CAAC;IAE/C,EAAE,CAAC,sCAAsC,EAAE,KAAK,IAAI,EAAE;QACpD,MAAM,SAAS,GAAG,uBAAe,EAAE,CAAC;QAEpC,MAAM,CAAC,GAAG,GAAG,CAAC,KAAK,EAAE,CAAC;QACtB,MAAM,GAAG,GAAG,MAAM,SAAS,CAAC,CAAC,EAAE,KAAK,IAAI,EAAE;YACxC,MAAM,IAAI,GAAG,iBAAU,EAAE,CAAC;YAC1B,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YACxB,OAAO,IAAI,eAAQ,CAAC,IAAI,EAAE;gBACxB,OAAO,EAAE;oBACP,kBAAkB,EAAE,MAAM;iBAC3B;aACF,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACzD,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import { contentEncoding } from \"./index\";\nimport { Request, Response } from \"servie/dist/node\";\nimport { createGzip } from \"zlib\";\n\ndescribe(\"popsicle user agent\", () => {\n  const req = new Request(\"http://example.com/\");\n\n  it(\"should use cookie store for requests\", async () => {\n    const transport = contentEncoding();\n\n    const r = req.clone();\n    const res = await transport(r, async () => {\n      const body = createGzip();\n      body.end(\"Hello world\");\n      return new Response(body, {\n        headers: {\n          \"Content-Encoding\": \"gzip\"\n        }\n      });\n    });\n\n    expect(r.headers.get(\"accept-encoding\")).toMatch(\"gzip\");\n    expect(await res.text()).toEqual(\"Hello world\");\n  });\n});\n"]}